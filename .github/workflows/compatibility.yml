name: Dependencies Analysis

on: push

permissions:
  actions: read
  contents: read

jobs:
  analyze:
    name: Check packages compatibility
    runs-on: ubuntu-latest

    steps:

    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.10"

    - name: Upgrade pip
      run: pip install --upgrade pip

    - name: Install dependencies
      run: pip install -Ur requirements.txt

    - name: Install WoWs minimap renderer
      run: pip install -U git+https://github.com/WoWs-Builder-Team/minimap_renderer

    - name: Check dependencies compatibility
      run: pip check
